<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fiverr Safe Message Tool with Restricted Words</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 750px;
      margin: 40px auto;
      padding: 20px;
      background: #f4f6f8;
    }
    h2, h3 { margin-bottom: 10px; }
    textarea {
      width: 100%;
      height: 120px;
      padding: 10px;
      font-size: 1em;
      margin-bottom: 10px;
    }
    button {
      padding: 8px 15px;
      font-size: 0.95em;
      margin: 5px 5px 15px 0;
      cursor: pointer;
    }
    .output {
      background: #fff;
      padding: 15px;
      border: 1px solid #ccc;
      white-space: pre-wrap;
      min-height: 80px;
    }
    .counter {
      font-size: 0.9em;
      color: #555;
      margin-bottom: 10px;
    }
    .restricted-words {
      margin-top: 15px;
      padding: 10px;
      background: #fff3f3;
      border: 1px solid #f5c2c2;
      color: #a33;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>üõ° Fiverr Safe Message Tool</h2>
  
  <label><strong>Your Message:</strong></label>
  <textarea id="inputText" placeholder="Write your Fiverr message..."></textarea>
  <div class="counter" id="inputCount">Words: 0</div>

  <button onclick="processMessage()">üîç Make It Safe</button>

  <h3>‚úÖ Safe Message:</h3>
  <div class="output" id="outputText"></div>
  <div class="counter" id="outputCount">Words: 0</div>

  <button onclick="copyOutput()">üìã Copy Safe Message</button>
  <button onclick="pasteToInput()">üì• Paste to Input</button>

  <div id="restrictedWords" class="restricted-words" style="display:none;"></div>

  <script>
    const riskyWords = ["email", "e-mail", "gmail", "hotmail", "outlook", "yahoo", "phone", "mobile", "whatsapp", "telegram", "skype", "zoom", "meet", "hangouts", "number", "contact", "call", "pay", "payment", "paypal", "venmo", "cashapp", "bank", "western union", "moneygram", "btc", "bitcoin", "crypto", "wallet", "wire transfer", "invoice", "outside fiverr", "off fiverr", "direct payment", "personal website", "domain", "link", "upwork", "freelancer.com", "peopleperhour", "toptal"
];

    function insertHyphen(word) {
      const clean = word.replace(/[^a-zA-Z]/g, "");
      if (clean.length <= 4) return word;

      const index = Math.floor(Math.random() * (clean.length - 2)) + 1;
      const newWord = clean.slice(0, index) + "-" + clean.slice(index);
      return word.replace(clean, newWord);
    }

    function processMessage() {
      let text = document.getElementById("inputText").value;
      let foundWords = [];

      riskyWords.forEach(risky => {
        const pattern = new RegExp(`\\b${risky}\\b`, "gi");

        // Detect all matches and add to foundWords array (avoid duplicates)
        let matches = text.match(pattern);
        if (matches) {
          matches.forEach(m => {
            const lower = m.toLowerCase();
            if (!foundWords.includes(lower)) foundWords.push(lower);
          });
        }

        // Replace with hyphenated version
        text = text.replace(pattern, match => insertHyphen(match));
      });

      document.getElementById("outputText").innerText = text;
      updateCounts();

      // Show restricted words found
      const restrictedDiv = document.getElementById("restrictedWords");
      if (foundWords.length) {
        restrictedDiv.style.display = "block";
        restrictedDiv.innerText = "üö´ Found restricted words: " + foundWords.join(", ");
      } else {
        restrictedDiv.style.display = "none";
        restrictedDiv.innerText = "";
      }
    }

    function copyOutput() {
      const text = document.getElementById("outputText").innerText;
      navigator.clipboard.writeText(text)
        .then(() => alert("‚úÖ Message copied!"))
        .catch(() => alert("‚ùå Copy failed!"));
    }

    async function pasteToInput() {
      try {
        const text = await navigator.clipboard.readText();
        if (!text.trim()) {
          alert("‚ö†Ô∏è Clipboard is empty!");
          return;
        }
        document.getElementById("inputText").value = text;
        updateCounts();
      } catch (err) {
        const fallback = prompt("‚ö†Ô∏è Clipboard access blocked. Paste manually here:");
        if (fallback) {
          document.getElementById("inputText").value = fallback;
          updateCounts();
        }
      }
    }

    function updateCounts() {
      const input = document.getElementById("inputText").value.trim();
      const output = document.getElementById("outputText").innerText.trim();
      document.getElementById("inputCount").innerText = "Words: " + (input ? input.split(/\s+/).length : 0);
      document.getElementById("outputCount").innerText = "Words: " + (output ? output.split(/\s+/).length : 0);
    }

    document.getElementById("inputText").addEventListener("input", updateCounts);
  </script>

</body>
</html>
